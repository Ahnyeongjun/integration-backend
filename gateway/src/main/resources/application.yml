server:
  port: 8080

jwt:
  secret: ${JWT_SECRET:your-256-bit-secret-key-here-must-be-at-least-32-characters-long}

spring:
  application:
    name: gateway
  cloud:
    gateway:
      routes:
        - id: auth-service
          uri: http://auth-service:8081
          predicates:
            - Path=/api/v1/auth/**

        - id: user-service
          uri: http://user-service:8082
          predicates:
            - Path=/api/v1/users/**

        - id: bookmark-service
          uri: http://bookmark-service:8083
          predicates:
            - Path=/api/v1/bookmarks/**

        - id: schedule-service
          uri: http://schedule-service:8084
          predicates:
            - Path=/api/v1/schedules/**

        - id: ticketing-service
          uri: http://ticketing-service:8085
          predicates:
            - Path=/api/v1/concerts/**, /api/v1/reservations/**, /api/v1/queue/**

        - id: book-service
          uri: http://book-service:8086
          predicates:
            - Path=/api/v1/books/**

        - id: travel-service
          uri: http://travel-service:8087
          predicates:
            - Path=/api/v1/itineraries/**, /api/v1/attractions/**

        - id: festival-service
          uri: http://festival-service:8088
          predicates:
            - Path=/api/v1/festivals/**

        - id: wedding-service
          uri: http://wedding-service:8089
          predicates:
            - Path=/api/v1/wedding-halls/**, /api/v1/dresses/**, /api/v1/dress-shops/**, /api/v1/makeup-shops/**, /api/v1/plans/**

        - id: ai-service
          uri: http://ai-service:8090
          predicates:
            - Path=/api/v1/recommend/**
          filters:
            - RewritePath=/api/v1/(?<segment>.*), /${segment}

        - id: image-service
          uri: http://image-service:8100
          predicates:
            - Path=/images/**

        # Swagger API Docs 라우팅
        - id: auth-service-docs
          uri: http://auth-service:8081
          predicates:
            - Path=/v3/api-docs/auth
          filters:
            - RewritePath=/v3/api-docs/auth, /v3/api-docs

        - id: user-service-docs
          uri: http://user-service:8082
          predicates:
            - Path=/v3/api-docs/user
          filters:
            - RewritePath=/v3/api-docs/user, /v3/api-docs

        - id: wedding-service-docs
          uri: http://wedding-service:8089
          predicates:
            - Path=/v3/api-docs/wedding
          filters:
            - RewritePath=/v3/api-docs/wedding, /v3/api-docs

        - id: schedule-service-docs
          uri: http://schedule-service:8084
          predicates:
            - Path=/v3/api-docs/schedule
          filters:
            - RewritePath=/v3/api-docs/schedule, /v3/api-docs

        - id: bookmark-service-docs
          uri: http://bookmark-service:8083
          predicates:
            - Path=/v3/api-docs/bookmark
          filters:
            - RewritePath=/v3/api-docs/bookmark, /v3/api-docs

        - id: festival-service-docs
          uri: http://festival-service:8088
          predicates:
            - Path=/v3/api-docs/festival
          filters:
            - RewritePath=/v3/api-docs/festival, /v3/api-docs

        - id: travel-service-docs
          uri: http://travel-service:8087
          predicates:
            - Path=/v3/api-docs/travel
          filters:
            - RewritePath=/v3/api-docs/travel, /v3/api-docs

        - id: ticketing-service-docs
          uri: http://ticketing-service:8085
          predicates:
            - Path=/v3/api-docs/ticketing
          filters:
            - RewritePath=/v3/api-docs/ticketing, /v3/api-docs

        - id: book-service-docs
          uri: http://book-service:8086
          predicates:
            - Path=/v3/api-docs/book
          filters:
            - RewritePath=/v3/api-docs/book, /v3/api-docs

        - id: ai-service-docs
          uri: http://ai-service:8090
          predicates:
            - Path=/v3/api-docs/ai
          filters:
            - RewritePath=/v3/api-docs/ai, /openapi.json

eureka:
  client:
    enabled: false

# Swagger 통합 설정
springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
    urls:
      - name: auth-service
        url: /v3/api-docs/auth
      - name: user-service
        url: /v3/api-docs/user
      - name: wedding-service
        url: /v3/api-docs/wedding
      - name: schedule-service
        url: /v3/api-docs/schedule
      - name: bookmark-service
        url: /v3/api-docs/bookmark
      - name: festival-service
        url: /v3/api-docs/festival
      - name: travel-service
        url: /v3/api-docs/travel
      - name: ticketing-service
        url: /v3/api-docs/ticketing
      - name: book-service
        url: /v3/api-docs/book
      - name: ai-service
        url: /v3/api-docs/ai
